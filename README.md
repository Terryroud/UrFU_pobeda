# üßô‚Äç‚ôÇÔ∏è Harry Potter Telegram Bot

Telegram –±–æ—Ç, –∏–º–∏—Ç–∏—Ä—É—é—â–∏–π –æ–±—â–µ–Ω–∏–µ —Å –ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä–æ–º (–Ω–∞ –æ—Å–Ω–æ–≤–µ LLM YandexGPT –∏ RAG —Å–∏—Å—Ç–µ–º—ã —Å –ª–æ—Ä–æ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞), –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FastAPI –∏ Docker.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º:

```
Telegram Bot ‚Üí Orchestrator ‚Üí [RAG, AI, Security, Database, Audit Services]
```

### üì¶ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|------|------------|
| **orchestrator** | 8000 | –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ |
| **telegram-bot** | - | –ü—Ä–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç Telegram |
| **rag-service** | 8001 | RAG –º–æ–¥–µ–ª—å –∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ |
| **ai-service** | 8002 | Yandex GPT –≥–µ–Ω–µ—Ä–∞—Ü–∏—è |
| **heuristic-service** | 8003 | –ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π |
| **database-service** | 8004 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö |
| **audit-service** | 8005 | –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker & Docker Compose
- Python 3.11+
- Telegram Bot Token
- Yandex Cloud API –∫–ª—é—á–∏

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
git clone <repository-url>
cd UrFU_pobeda
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```env
# Telegram
TELEGRAM_TOKEN=your_telegram_bot_token_here

# Yandex Cloud
YANDEX_API_KEY=your_yandex_api_key
IAM_TOKEN=your_iam_token
FOLDER_ID=your_folder_id
KEY_ID=your_key_id
SERVICE_ACCOUNT_ID=your_service_account_id

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=sqlite:///app/data/bot_database.db
```

### 3. –ó–∞–ø—É—Å–∫ –≤ Docker

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤
curl http://localhost:8000/health  # orchestrator
curl http://localhost:8001/health  # rag-service
curl http://localhost:8002/health  # ai-service
curl http://localhost:8003/health  # security
curl http://localhost:8004/health  # database
curl http://localhost:8005/health  # audit
```

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üí¨ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç** - –æ–±—â–µ–Ω–∏–µ —Å AI –≤ —Å—Ç–∏–ª–µ –ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä–∞
- **üìö –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –ø–æ–∏—Å–∫** - RAG –º–æ–¥–µ–ª—å –¥–ª—è —Ç–æ—á–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç –ª–∏—Ü–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- **üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ—Ç—Å–µ–∏–≤–∞–Ω–∏—è –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **üíæ –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –±–µ—Å–µ–¥—ã –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏
- **üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º** - –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—â–µ–Ω–∏—è

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/menu` - –æ—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é –∫–æ–º–∞–Ω–¥
- `/change_name` - –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/delete_account` - —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç 

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# –∏–ª–∏ .venv\Scripts\activate  # Windows

pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
cd orchestrator_service
python main.py
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
UrFU_pobeda/
‚îú‚îÄ‚îÄ orchestrator_service/     # –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
‚îú‚îÄ‚îÄ telegram_bot_service/     # Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ rag_service/             # RAG –º–æ–¥–µ–ª—å
‚îú‚îÄ‚îÄ ai_service/              # Yandex GPT
‚îú‚îÄ‚îÄ heuristic_service/       # –ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ database_service/        # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ audit_service/           # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ docker-compose.yml       # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```


## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **FastAPI** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ API
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **SQLite** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ PostgreSQL)
- **FAISS** - –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫

### AI/ML
- **Yandex GPT** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
- **Sentence Transformers** - —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
- **RAG** - Retrieval-Augmented Generation

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Docker Compose** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- **Yandex Cloud** - —Ö–æ—Å—Ç–∏–Ω–≥
- **GitLab CI/CD** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è


## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö. –í—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ –æ–±—Ä–∞–∑—ã –ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ø—Ä–∞–≤–æ–æ–±–ª–∞–¥–∞—Ç–µ–ª—è–º.

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–µ–π—Å—Ç–≤—É—é—â–∏–π Telegram Bot Token –∏ –¥–æ—Å—Ç—É–ø –∫ Yandex Cloud API.
